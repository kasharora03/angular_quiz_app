<ng-container *ngIf="!isQuizCompleted">
<div class="container-fluid mt-4 mainques">
    <!-- Question Navigation Blocks -->
    <div class="question-navigation">
      <ul class="list-unstyled d-flex flex-wrap">
        <li *ngFor="let question of quesList; let i = index" 
            [ngClass]="getNavBgClass(i)"
            class="nav-item"
            (click)="goToQuestion(i)">
          {{i + 1}}
        </li>
      </ul>
    </div>
  
    <!-- Quiz Content -->
    <div class="card">
      <div class="d-flex justify-content-between p-3">
        <img src="https://png.pngtree.com/png-clipart/20230207/original/pngtree-quiz-logo-with-speech-bubble-symbols-png-image_8947100.png" 
             height="90px" width="90px" alt="pic" class="img-fluid" />
        <div>
          <h1>Quiz</h1>
          <p>Welcome {{name}}</p>
        </div>
      </div>
      <div class="d-flex justify-content-around py-3">
        <div class="score">
          <span class="fst-italic">Points: {{points}}</span>
        </div>
        <div class="ques-remain">
          <span class="fst-italic">Questions: {{currQues + 1}}/{{quesList.length}}</span>
        </div>
        <div class="timer">
          {{counter}} seconds ‚è≥
        </div>
      </div>
      <div class="progress">
        <div class="progress-bar" role="progressbar" [ngStyle]="{'width': progress + '%'}" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="question">
        <div class="card m-2 p-1 px-3">
          <h3 style="font-size: 20px;">{{quesList[currQues]?.questionText}}</h3>
        </div>
      </div>
      <div class="options">
        <ol class="list-unstyled" *ngFor="let option of quesList[currQues]?.options">
          <li (click)="selectOption(option)" >
            <div class="card m-2 p-1 px-3 optiontext"
                 [ngClass]="{'border-green': selectedOption[currQues] === option}">
              <h5 class="lead ">{{option.text}}</h5>
            </div>
          </li>
        </ol>
      </div>
      <div class="d-flex justify-content-between">
        <button *ngIf="currQues > 0" class="btn" (click)="prevQuestion()">
          <i class="fa fa-chevron-left" aria-hidden="true"></i>
        </button>
        <button *ngIf="!isLastQuestion()" class="btn btn-primary" (click)="saveAndNext()">
          Save and Next
        </button>
        <button *ngIf="!isLastQuestion()" class="btn btn-warning" (click)="reviewAndNext()">
          Review and Next
        </button>
        <button *ngIf="isLastQuestion()" class="btn btn-success" (click)="submitQuiz()">
          Submit
        </button>
      </div>
    </div>
  </div>
</ng-container>
<ng-container *ngIf=" isQuizCompleted"
>
<div class="row d-flex justify-content-center text-center">
    <div class="col-md-8">
        <div class="result card p-4">
            <h3 class="mb-4">Congratulations!! <br>You have completed the quiz. <br>Below is your result:</h3>
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Total Questions Attempted</td>
                        <td>{{quesList.length}}</td>
                    </tr>
                    <tr>
                        <td>Total Correct Answers</td>
                        <td>{{correctans}}</td>
                    </tr>
                    <tr>
                        <td>Total Incorrect Answers</td>
                        <td>{{incorrectans}}</td>
                    </tr>
                    <tr>
                        <td>Your Score</td>
                        <td>{{points}} Points</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</ng-container>